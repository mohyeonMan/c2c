â— ğŸš¨ ì‹¤ì œ ì‘ë™ ìƒíƒœ ìƒì„¸ ë¶„ì„ ê²°ê³¼

  ë¯¸ì•ˆí•©ë‹ˆë‹¤. ì œê°€ ë„ˆë¬´ í”¼ìƒì ìœ¼ë¡œ ë¶„ì„í–ˆë„¤ìš”. ì‹¤ì œë¡œ
  ìˆœì°¨ì ìœ¼ë¡œ ë©”ì†Œë“œë¥¼ ë”°ë¼ê°€ë©° ë¶„ì„í•œ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼
  ê°™ìŠµë‹ˆë‹¤:

  ğŸ’¥ ì¹˜ëª…ì ì¸ ë¬¸ì œë“¤

  1. ë°© ìƒì„±ì´ ì™„ì „íˆ ì‹¤íŒ¨í•˜ëŠ” ì´ìœ  âŒ

  ë¬¸ì œì  1: RoomRedisRepository.save()ê°€ ì‹¤ì œë¡œ ì•„ë¬´ê²ƒë„ 
  ì•ˆí•¨
  // í˜„ì¬ ì½”ë“œ (RoomRedisRepository:76-80)
  @Override
  public Room save(Room room) {
      // Redisì—ì„œëŠ” SET í‚¤ ìì²´ê°€ ë°©ì˜ ì¡´ì¬ë¥¼ ì˜ë¯¸
      // ì‹¤ì œ ì €ì¥ì€ addMemberì—ì„œ ìˆ˜í–‰
      return room; // â† ì´ê²Œ ë¬¸ì œ! ì•„ë¬´ê²ƒë„ ì•ˆ ì €ì¥í•¨
  }

  ì‹¤ì œ í”Œë¡œìš° ì¶”ì :
  index.html â†’ createRoom() â†’ API /api/rooms â†’
  CreateRoomService.createRoom()
  â†’ new Room(roomId, creatorName) â†’
  roomRepository.save(room) â†’ ì•„ë¬´ê²ƒë„ ì•ˆë¨!
  â†’ Redisì— room:{roomId}:members í‚¤ê°€ ìƒì„±ë˜ì§€ ì•ŠìŒ
  â†’ ë°© ì°¸ì—¬ ì‹œ "ë°©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ì˜¤ë¥˜ ë°œìƒ

  ë¬¸ì œì  2: Room ìƒì„±ìê°€ ì˜ëª»ëœ ë¡œì§
  // Room.java:38-43
  public Room(String roomId, String creatorName) {
      this(roomId);
      if (creatorName != null &&
  !creatorName.trim().isEmpty()) {
          addMember(creatorName.trim()); // â† Java ê°ì²´ì—ë§Œ
   ì¶”ê°€, Redisì—ëŠ” ì•ˆ ì €ì¥
      }
  }

  2. WebSocket ì—°ê²° ì‹¤íŒ¨ âŒ

  ë¬¸ì œì  1: Redis í‚¤ ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜
  - application.yml: Redis hostê°€ redis (Docker ì„œë¹„ìŠ¤ëª…)
  - ë¡œì»¬ ì‹¤í–‰ ì‹œ: Redisê°€ localhost:6379ì—ì„œ ì‹¤í–‰ë¨
  - â†’ ì—°ê²° ì‹¤íŒ¨

  ë¬¸ì œì  2: WebSocket ì—”ë“œí¬ì¸íŠ¸ ë¶ˆì¼ì¹˜
  // c2c-common.js:234
  const wsUrl = `${protocol}//${window.location.host}/ws`;
  // WebSocketConfig.java:29
  registry.addHandler(webSocketHandler, "/ws") // â† ì¼ì¹˜í•¨
  (ë¬¸ì œì—†ìŒ)

  ë¬¸ì œì  3: ë©”ì‹œì§€ ë¸Œë¡œì»¤ ì˜ì¡´ì„± ëˆ„ë½
  // C2CWebSocketHandler.java:44
  private final MessageBroker messageBroker; // â†
  RedisMessageBrokerê°€ ì£¼ì…ë˜ì–´ì•¼ í•¨

  3. ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨ âŒ

  ë¬¸ì œì  1: Redis Pub/Sub ì„¤ì • ë¬¸ì œ
  - RedisMessageBrokerëŠ” êµ¬í˜„ë˜ì–´ ìˆì§€ë§Œ
  - RedisMessageListenerContainerê°€ ì œëŒ€ë¡œ ì‹œì‘ë˜ì§€ ì•Šì„ ìˆ˜
   ìˆìŒ

  âœ… ì‹¤ì œë¡œ ì‘ë™í•˜ëŠ” ë¶€ë¶„ë“¤

  1. í”„ë¡ íŠ¸ì—”ë“œ UI âœ…

  - index.html â†’ ë°© ìƒì„±/ì°¸ì—¬ UI ì™„ì „ ì‘ë™
  - c2c-common.js â†’ ì…ë ¥ ê²€ì¦, API í˜¸ì¶œ ë¡œì§ ì™„ì „ ì‘ë™
  - CSS/ìŠ¤íƒ€ì¼ë§ â†’ ì™„ì „ ì‘ë™

  2. ê¸°ë³¸ ì›¹ ë¼ìš°íŒ… âœ…

  - / â†’ index.html âœ…
  - /chat/{roomId} â†’ chat.html âœ… (ChatController ì¡´ì¬)
  - /api/rooms POST â†’ RoomRestController.createRoom() âœ…

  3. í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ êµ¬ì¡° âœ…

  - Domain Layer ì™„ì „ êµ¬í˜„ âœ…
  - Application Layer ì™„ì „ êµ¬í˜„ âœ…
  - Infrastructure Layer 90% êµ¬í˜„ âœ…

  ğŸ”§ ì‹¤ì œ ì‘ë™ì‹œí‚¤ë ¤ë©´ ìˆ˜ì •ì´ í•„ìš”í•œ ë¶€ë¶„ë“¤

  ìš°ì„ ìˆœìœ„ 1: ë°© ìƒì„± ìˆ˜ì • (í•„ìˆ˜)

  // CreateRoomService.java ìˆ˜ì • í•„ìš”
  @Override
  public String createRoom(CreateRoomCommand command) {
      String roomId = generateRoomId();

      // ì‹¤ì œ Redisì— ë°© ìƒì„± + ìƒì„±ì ì¶”ê°€
      roomRepository.addMember(roomId,
  command.creatorName());
      // ë˜ëŠ” RoomRedisRepository.save() ë©”ì†Œë“œ êµ¬í˜„ ìˆ˜ì •

      return roomId;
  }

  ìš°ì„ ìˆœìœ„ 2: Redis ì—°ê²° ì„¤ì • ìˆ˜ì • (í•„ìˆ˜)

  # application.yml ìˆ˜ì • í•„ìš”
  spring:
    data:
      redis:
        host: localhost  # redis â†’ localhostë¡œ ë³€ê²½
        port: 6379

  ìš°ì„ ìˆœìœ„ 3: ë¹ ì§„ Bean ë“±ë¡ (í•„ìˆ˜)

  - ëª¨ë“  Repository, Service Beanì´ Springì— ë“±ë¡ë˜ì–´ì•¼ í•¨

  ğŸ“Š ê¸°ëŠ¥ë³„ ì‹¤ì œ ì‘ë™ ê°€ëŠ¥ì„±

  | ê¸°ëŠ¥           | ìƒíƒœ  | ì‘ë™ë¥   | ì£¼ìš” ë¬¸ì œ
           |
  |--------------|-----|------|--------------------------|
  | ë©”ì¸ í˜ì´ì§€       | âœ…   | 100% | ì—†ìŒ
        |
  | ë°© ìƒì„± API     | âŒ   | 0%   | save() ë©”ì†Œë“œê°€ Redisì—
   ì €ì¥ ì•ˆí•¨ |
  | ë°© ì°¸ì—¬         | âŒ   | 0%   | ë°©ì´ ìƒì„±ë˜ì§€ ì•Šì•„ì„œ
  ì°¸ì—¬ ë¶ˆê°€        |
  | WebSocket ì—°ê²° | âŒ   | 30%  | Redis ì—°ê²° ì‹¤íŒ¨í•  ê°€ëŠ¥ì„±
           |
  | ì±„íŒ… ë©”ì‹œì§€       | âŒ   | 0%   | ë°© ì°¸ì—¬ê°€ ì•ˆë˜ë¯€ë¡œ
  ë¶ˆê°€ëŠ¥           |
  | ë°© ë– ë‚˜ê¸°        | âŒ   | 0%   | ë°© ì°¸ì—¬ê°€ ì•ˆë˜ë¯€ë¡œ
  ë¶ˆê°€ëŠ¥           |

  ğŸ¯ ê²°ë¡ 

  ì‹¤ì œ ì‘ë™ë¥ : 15% (ë©”ì¸ í˜ì´ì§€ì™€ ê¸°ë³¸ ë¼ìš°íŒ…ë§Œ)

  ì´ì „ì— ì œê°€ "95% ì‘ë™ ê°€ëŠ¥"ì´ë¼ê³  í•œ ê²ƒì€ ì™„ì „íˆ ì˜ëª»ëœ 
  ë¶„ì„ì´ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œëŠ” í•µì‹¬ ê¸°ëŠ¥ë“¤ì´ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.


  ê°€ì¥ ì‹¬ê°í•œ ë¬¸ì œëŠ” RoomRedisRepository.save() ë©”ì†Œë“œê°€ 
  ì‹¤ì œë¡œëŠ” Redisì— ì•„ë¬´ê²ƒë„ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.
  ì´ë¡œ ì¸í•´ ë°© ìƒì„±ë¶€í„° ì™„ì „íˆ ì‹¤íŒ¨í•©ë‹ˆë‹¤.